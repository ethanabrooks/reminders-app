# GPT Reminders iOS App

Native Swift application acting as a background worker node.

## App Architecture

```mermaid
classDiagram
    class AppDelegate {
        +didFinishLaunching()
        +didReceiveRemoteNotification()
    }
    class CommandHandler {
        -jwtVerifier
        +processCommand(envelope)
    }
    class JWTVerifier {
        -publicKey
        +verify(token)
    }
    class RemindersService {
        +createTask()
        +listTasks()
    }
    class EventKit {
        <<Apple Framework>>
    }

    AppDelegate --> CommandHandler : Delegates Push
    CommandHandler --> JWTVerifier : Validates
    CommandHandler --> RemindersService : Executes
    RemindersService --> EventKit : CRUD
```

## Execution Sequence

```mermaid
sequenceDiagram
    participant APNs
    participant AppDel as AppDelegate
    participant Handler as CommandHandler
    participant Service as RemindersService
    participant Server

    APNs->>AppDel: Silent Push (Background Wake)
    AppDel->>Handler: processCommand(envelope)

    rect rgb(240, 240, 240)
        Note right of Handler: Validation Phase
        Handler->>Handler: Verify JWT Signature
        Handler->>Handler: Decode Payload
    end

    rect rgb(230, 255, 230)
        Note right of Handler: Execution Phase
        Handler->>Service: execute(op, args)
        Service->>Service: EventKit Operation
    end

    Handler->>Server: POST /device/result
    AppDel-->>APNs: completionHandler(.newData)
```

## Dependencies

- **EventKit**: Access to Apple Reminders database.
- **UserNotifications**: Handling silent push triggers.
- **Security**: Crypto logic for RS256 verification.

## Configuration

Ensure `public.pem` generated by the server is added to the Xcode project bundle.
